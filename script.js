const imageData = [
  {
    src: 'assets/nft1.png',
    title: 'NFT Me',
    description: 'My NFT artwork showcasing a futuristic theme.',
    size: 'normal',
  },
  {
    src: 'assets/fine.jpeg',
    title: 'Fire Coffee',
    description: 'Fire CÃ¶ffie.',
    size: 'big',
    orientation: 'horizontal',
  },
  {
    src: 'assets/ice3.jpg',
    title: 'Icescape',
    description: 'Icebergs floating in a serene arctic landscape.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/kromo.jpg',
    title: 'Personality',
    description: 'A portrait capturing the essence of individuality.',
    size: 'small',
  },
  {
    src: 'assets/earp.jpg',
    title: 'Earp',
    description: 'Earp bear in the wild.',
    size: 'big',
  },
  {
    src: 'assets/pengu.png',
    title: 'Mi Pingu',
    description: 'My penguin personal mascot.',
    size: 'normal',
  },
  {
    src: 'assets/oikawa.png',
    title: 'oikaawa',
    description: 'Oikawa Tooru from Haikyuu!!',
    size: 'small',
    orientation: 'horizontal',
  },
  {
    src: 'assets/teddy.jpg',
    title: 'Teddy Draw',
    description: 'Teddy bear sketch in pencil.',
    size: 'normal',
  },
  {
    src: 'assets/nyan xp.jpeg',
    title: 'Nyan XP',
    description: 'Windows xp with nyan cat theme.',
    size: 'big',
    orientation: 'horizontal',
  },
  {
    src: 'assets/kofie.jpeg',
    title: 'kofie',
    description: 'Kofie drink for coding',
    size: 'small',
    orientation: 'horizontal',
  },
  {
    src: 'assets/candy.png',
    title: 'Candy Land',
    description: 'Candy colorful world full of sweets.',
    size: 'normal',
  },
  {
    src: 'assets/net.png',
    title: 'Net Wallpaper',
    description: 'Net 2006 style wallpaper design.',
    size: 'big',
    orientation: 'horizontal',
  },
  {
    src: 'assets/azuki.jpeg',
    title: 'Azuki NFT',
    description: 'Azuki Water Elemental Theme.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/mada.png',
    title: 'Mada NFT',
    description: 'Mada as a angel NFT artwork.',
    size: 'small',
  },
  {
    src: 'assets/malciers.jpeg',
    title: 'Mal Glaciers',
    description: 'My interpretation of glaciers in art.',
    size: 'big',
  },
  {
    src: 'assets/linux.png',
    title: 'Linux Setup',
    description: 'Linux desktop setup with msync themes.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/horo.jpg',
    title: 'Horoskop',
    description: 'Astrological signs and symbols in design.',
    size: 'normal',
  },
  {
    src: 'assets/rocket.png',
    title: 'rocket',
    description: 'Rocket launching into space.',
    size: 'big',
    orientation: 'horizontal',
  },
  {
    src: 'assets/icy.jpeg',
    title: 'Icy',
    description: 'My personality in icy artwork form.',
    size: 'small',
  },
  {
    src: 'assets/poop.jpg',
    title: 'Poop',
    description: 'Poop NFT MSync edition.',
    size: 'normal',
  },
  {
    src: 'assets/team.png',
    title: 'MSync Team',
    description: 'Team MSync for collaboration and success.',
    size: 'big',
  },
  {
    src: 'assets/astro.png',
    title: 'Astroworld',
    description: 'A journey through the stars and beyond.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/pingu.png',
    title: 'Pingu',
    description: 'Pingu egg with fish and cute face.',
    size: 'small',
    orientation: 'horizontal',
  },
  {
    src: 'assets/metav.jpeg',
    title: 'Metaverse',
    description: 'Metaverse concept art with futuristic vibes.',
    size: 'big',
    orientation: 'horizontal',
  },
  {
    src: 'assets/alpaca.jpg',
    title: 'Alpaca',
    description: 'Alpaca with toys in a playful setting.',
    size: 'small',
  },
  {
    src: 'assets/ball.png',
    title: 'Dark Ball',
    description: 'Ball with dark aesthetic and moody lighting.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/dark.png',
    title: 'Dark Theme',
    description: 'Dark themed artwork with deep contrasts.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'unicorn.png',
    title: 'Unicorn mascot',
    description: 'Unicorn mascot with vibrant colors and fantasy vibe.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/medusa.png',
    title: 'medusa',
    description: 'Medusa with awards and blue theme.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/splasc.jpg',
    title: 'Kovie Splash',
    description: 'spilled coffee on stopcontact',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/bear.jpg',
    title: 'Bear',
    description: 'Blue bear with aesthetic vibes.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/vansarden.jpg',
    title: 'vansarden',
    description: 'Vans shoes with fish pattern design.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/spr.jpg',
    title: 'Sappire',
    description: 'Bombay sappire drink for refreshment.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/bob.jpeg',
    title: 'Balon',
    description: 'Bubble baddies in the ocean.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/othellos.jpg',
    title: 'Othello',
    description: 'Play the classic board game Othello, Rubik and Chess.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/ices.jpeg',
    title: 'Ice Splash',
    description: 'Ice cubes splashing into a drink.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/me.jpeg',
    title: 'Coding Time',
    description: 'Coding time with a view',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/boston.jpg',
    title: 'Toxic',
    description: 'Toxic artwork photography at Bekasi.',
    size: 'normal',
    orientation: 'horizontal',
  },
  {
    src: 'assets/kali.jpg',
    title: 'Kali Linux',
    description: 'Kali Linux themed artwork with blue vibes.',
    size: 'normal',
    orientation: 'horizontal',
  },
];

class Example {
  constructor(options) {
    this.root = options.root;
    this.galleryContainer = document.getElementById('gallery-container');
    this.tooltip = document.getElementById('custom-tooltip');

    this.init();
  }

  init() {
    this.loadImagesIntoGallery();
    this.initializeLocomotiveScroll();
    this.addHoverHandlers();
  }

  loadImagesIntoGallery() {
    imageData.forEach((data, index) => {
      const itemDiv = document.createElement('div');
      itemDiv.classList.add('item', `-${data.size}`);
      if (data.orientation === 'horizontal') {
        itemDiv.classList.add('-horizontal');
      }

      itemDiv.id = `item-${index}`;
      itemDiv.dataset.scroll = '';
      itemDiv.dataset.scrollCall = 'handleInView';
      itemDiv.dataset.scrollTarget = `#${itemDiv.id}`;
      itemDiv.dataset.scrollSpeed = (index % 4) + 1;
      itemDiv.dataset.description = data.description;

      const img = document.createElement('img');
      img.classList.add('image');
      img.dataset.src = data.src;
      img.alt = data.title;
      img.loading = 'lazy';

      itemDiv.appendChild(img);
      this.galleryContainer.appendChild(itemDiv);
    });
  }

  initializeLocomotiveScroll() {
    this.scroll = new LocomotiveScroll({
      el: this.root,
      direction: 'horizontal',
      smooth: true,
      lerp: 0.05,
      tablet: {
        smooth: true,
      },
      smartphone: {
        smooth: true,
      },
    });

    this.scroll.on('call', this.handleScrollCall.bind(this));
    this.scroll.update();
  }

  handleScrollCall(func, way, obj) {
    if (func !== 'handleInView') {
      return;
    }

    const img = obj.el.querySelector('.image');

    if (way === 'enter') {
      if (img.dataset.src) {
        img.src = img.dataset.src;
        delete img.dataset.src;
      }
      img.classList.add('-active');
    } else {
      img.classList.remove('-active');
    }
  }

  addHoverHandlers() {
    this.items = this.galleryContainer.querySelectorAll('.item');
    [].forEach.call(this.items, (item) => {
      item.addEventListener('mouseenter', () => {
        const desc = item.dataset.description;
        this.tooltip.textContent = desc;
        this.tooltip.style.display = 'block';
      });

      item.addEventListener('mouseleave', () => {
        this.tooltip.style.display = 'none';
      });

      item.addEventListener('mousemove', (e) => {
        let x = e.clientX + 15;
        let y = e.clientY + 15;

        if (x + this.tooltip.offsetWidth + 30 > window.innerWidth) {
          x = e.clientX - this.tooltip.offsetWidth - 15;
        }
        if (y + this.tooltip.offsetHeight + 30 > window.innerHeight) {
          y = e.clientY - this.tooltip.offsetHeight - 15;
        }

        this.tooltip.style.left = `${x}px`;
        this.tooltip.style.top = `${y}px`;
      });
    });
  }
}

window.addEventListener('DOMContentLoaded', (event) => {
  const example = new Example({
    root: document.querySelector('.scroll-animations-example'),
  });
});